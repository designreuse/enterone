<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.yedam.fandemic.impl.UntactMapper">

	<!--전체 리스트 -->
	<select id="untactList" resultType="map">
	
		SELECT T.GO_NO, T.MEM_ID ,D.GO_NAME, D.GO_TYPE, D.GO_UNTSDATE, D.GO_UNTTIME, D.ST_ID, ROUND(D.GO_UNTEDATE - SYSDATE) AS DDAY , D.GO_PIC
		FROM GOODS D , TBUYER T
		WHERE T.GO_NO = D.GO_NO
	
		<!-- SELECT G.GO_NO , D.GO_NAME , B.MEM_ID, D.GO_TYPE, D.GO_UNTSDATE, D.GO_UNTTIME, D.ST_ID, ROUND(D.GO_UNTEDATE - SYSDATE) AS DDAY , D.GO_PIC
		FROM GBUYDETAIL G , GOODS D , GBUYER B
		WHERE G.GO_NO = D.GO_NO
		AND G.GB_NO = B.GB_NO
		AND D.GO_TYPE = 'TICKET' -->

	</select>	

	<!-- 코드 가져오기 -->
	<select id="getUntactCode" resultType="string" parameterType="string">
		SELECT GO_CODE FROM GOODS WHERE GO_NO = #{go_no}
	</select>
	
	<!--커밍순 -->
	<select id="comingsoonList" resultType="map">
		SELECT S.ST_NAME, G.GO_PIC, TO_CHAR(G.GO_UNTSDATE, 'YYYY-MM-DD') AS GO_UNTSDATE
		FROM GOODS G, STAR S
		WHERE G.ST_ID = S.ST_ID
		AND G.GO_UNTSDATE >= SYSDATE
	</select>
	
</mapper>
