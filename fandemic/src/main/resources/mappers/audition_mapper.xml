<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.yedam.fandemic.impl.AuditionMapper">
	<!-- 닉네임중복체크 -->
	<select id="nickCheck" parameterType="Trainee" resultType="int">
		SELECT COUNT(*)
		FROM TRAINEE
		WHERE TR_NAME=#{tr_name}
	</select>
	<!-- 연습생등록 -->
	<insert id="inserttr" parameterType="Trainee">
		INSERT INTO TRAINEE (
		MEM_ID,
		TR_NAME,
		TR_PIC,
		TR_CONTENT,
		TR_BRANCH1,
		TR_BRANCH2
		)
		VALUES(
		#{mem_id},
		#{tr_name},
		#{tr_pic},
		#{tr_content},
		#{tr_branch1},
		#{tr_branch2})
	</insert>
	<select id="selectTr" resultType="Trainee">
	SELECT * FROM TRAINEE
	</select>
	
	  <insert id="insertac" parameterType="Activity">
	<!-- 연습생 활동 지원 글 등록 -->
	 INSERT INTO ACTIVITY 
			(
				AC_NO,
				AC_TITLE,
				AC_TIME,
				AC_CONTENT,
				AC_HITS,
				AC_LIKES,
				AC_FILE,
				MEM_ID
			)
	VALUES (
	SNS_AC_SEQ.NEXTVAL,
	#{ac_title},
	SYSDATE,
	#{ac_content},
	default,
	default,
	#{ac_file},
	#{mem_id})

</insert>

<!-- 연습생 활동 지원 글 수정하기 위한 select  -->
<select id="activityUpdateselect" parameterType="Activity" resultType="Activity">
SELECT *
FROM ACTIVITY
WHERE MEM_ID=#{mem_id}
</select>


<!-- 연습생 활동 지원 글 수정 -->
<update id="activityUpdate" parameterType="Activity">
	 	UPDATE ACTIVITY SET AC_TITLE=#{ac_title}, 
	 						AC_CONTENT=#{ac_content}, 
	 						AC_FILE=#{ac_file}
	 	WHERE AC_NO=#{ac_no}
	</update>
	
	
<!--연습생 활동 지원 글  삭제 -->
	 <delete id="activityDelete" parameterType="Activity" >
	DELETE FROM ACTIVITY
		WHERE AC_NO=#{ac_no}
	</delete>	
<!--상세프로필-->
<select id="activityDetail" parameterType="Activity" resultType="Activity">
	SELECT * FROM ACTIVITY 
		WHERE MEM_ID=#{mem_id}
	</select>
<!-- 오디션 공고 목록 -->
<select id="auditionlist" parameterType="Aboard" resultType="Aboard">
	SELECT * FROM ABOARD 
	ORDER BY ABO_NO DESC
</select>
<!-- 소속사별로 게시물 목록 조회 -->
	<!-- <select id="getComList" parameterType="Aboard" resultType="Aboard">
		SELECT * FROM ABOARD 
		WHERE COM_ID=#{com_id}
		ORDER BY ABO_NO DESC
	</select> -->
	
<!-- 단건 조회 -->
<select id="getAboardInfo" parameterType="Aboard" resultType="Aboard">
		SELECT * 
		FROM ABOARD
		WHERE abo_no = #{abo_no}
	</select>
</mapper>